import{q as m,r as p,a as e,j as a,y as b}from"./app-ee8c0df1.js";import{B as h}from"./logotasnim-bdb3eb30.js";import{D as x}from"./DashboardLayoutUser-b3438152.js";import{a as l}from"./Combination-7660c255.js";import{w as u,S as y}from"./sweetalert2-react-content.es-8ada7a48.js";import"./createLucideIcon-19638271.js";import"./LoadingHeader-32ef7543.js";import"./menu-769a5b3f.js";import"./chevron-up-b21c54ba.js";const T=()=>{const{invoices:t,snapToken:o,clientKey:n}=m().props;let d=t.total_amount;d=parseInt(parseFloat(d));const s=u(y);p.useEffect(()=>{const r=document.createElement("script");return r.src="https://app.sandbox.midtrans.com/snap/snap.js",r.setAttribute("data-client-key",n),r.async=!0,document.body.appendChild(r),()=>{document.body.removeChild(r)}},[n]);const c=()=>{window.snap?window.snap.pay(o,{onSuccess:r=>{s.fire({title:"Pembayaran Berhasil",text:"Pembayaran Berhasil",icon:"success",confirmButtonText:"Ok"}),b.visit(`/santri-invoice/${t.uuid}`)},onPending:r=>{s.fire({title:"Pending",text:"Payment is pending!",icon:"info",confirmButtonText:"OK"})},onError:r=>{s.fire({title:"Gagal",text:"Terjadi kesalahan saat melakukan pembayaran.",icon:"error"})},onClose:()=>{s.fire({title:"Uppss",text:"Anda telah menutup halaman pembayaran.",icon:"warning"})}}):alert("Snap.js is not loaded.")};return e(x,{children:a("div",{children:[a("div",{className:"space-y-4",children:[a("div",{className:"flex items-center justify-between",children:[e("h1",{className:"text-xl font-semibold text-primary underline underline-offset-4",children:"Invoice Pembayaran"}),e("div",{children:e(h,{onClick:()=>c(),children:"Bayar"})})]}),a("div",{className:"space-y-2",children:[a("p",{children:["Pembayaran"," ",a("span",{className:"font-semibold text-primary",children:[" ",": ",t.card_payments.name]})]}),a("p",{children:["No Invoice"," ",a("span",{className:"font-semibold text-primary",children:[": ",t.uuid]})]}),e("p",{children:e("span",{className:`${t.is_paid?"bg-primary text-white ":"bg-red-500 text-white "}px-2 text-sm py-1 rounded`,children:t.is_paid?"Dibayar":"Belum dibayar"})})]})]}),a("div",{className:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark mt-10 pb-2.5",children:[e("div",{className:"border-b border-stroke py-4 px-7 dark:border-strokedark",children:e("h3",{className:"font-medium text-black dark:text-white",children:"List Pembayaran"})}),a("div",{className:"max-w-full overflow-x-auto px-5",children:[a("table",{className:"w-full table-auto ",children:[e("thead",{className:"table-header-group",children:a("tr",{className:"bg-gray-2 text-left dark:bg-meta-4",children:[e("th",{className:"min-w-[50px] py-4 px-4 font-medium text-black dark:text-white xl:pl-11",children:"No"}),e("th",{className:"min-w-[100px] py-4 px-4 font-medium text-black dark:text-white xl:pl-11",children:"Bulan"}),e("th",{className:"min-w-[100px] py-4 px-4 font-medium text-black dark:text-white xl:pl-11",children:"Harga"})]})}),e("tbody",{children:t.payments.map((r,i)=>a("tr",{className:"border-b border-stroke dark:border-strokedark",children:[e("td",{className:"border-b border-[#eee] py-5 px-4 dark:border-strokedark xl:pl-11",children:i+1}),e("td",{className:"border-b border-[#eee] py-5 px-4 dark:border-strokedark xl:pl-11",children:r.bulan}),e("td",{className:"border-b border-[#eee] py-5 px-4 dark:border-strokedark xl:pl-11",children:l(t.card_payments.price)})]},i))})]}),a("div",{className:"flex justify-between border-t border-stroke dark:border-strokedark w-full px-4 py-2",children:[e("p",{className:"font-semibold",children:"Total"}),e("p",{className:"font-semibold",children:l(d)})]})]})]})]})})};export{T as default};
