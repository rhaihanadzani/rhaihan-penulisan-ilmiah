import{q as C,W as j,r as p,j as a,a as e}from"./app-d8f1c9e8.js";import{D as O}from"./DashboardLayoutUser-cd3590b4.js";import{D as S,a as L,b as T,c as B,d as M,e as R}from"./dialog-b8bc2ff3.js";import{a as h}from"./Combination-b784b8dc.js";import{w as E,S as F}from"./sweetalert2-react-content.es-800c6d9e.js";import"./LoadingHeader-55dd4285.js";import"./createLucideIcon-719c414c.js";import"./mode-toggle-3dea8779.js";import"./menu-72884eaf.js";import"./logotasnim-66984677.js";import"./chevron-up-10b6c2a7.js";import"./index-1a85cc54.js";import"./x-e06bcb1e.js";const d=E(F),Y=()=>{const{cardPayment:n,bulanList:s,flash:I}=C().props,{data:i,setData:u,post:x,processing:o,errors:m,reset:k}=j({bulan:[]}),[y,f]=p.useState(!1),[g,c]=p.useState(!1),N=r=>{f(!y);const t=r.target.value;u(l=>l.bulan.includes(t)?{...l,bulan:l.bulan.filter(D=>D!==t)}:{...l,bulan:[...l.bulan,t]})},b=n.price,w=i.bulan.length*b,v=r=>{r.preventDefault(),x(route("payments.process",n.uuid),{onFinish:()=>{c(!1),k("bulan"),d.fire({title:"Mengalihkan...",didOpen:()=>{d.showLoading()}})},onProgress:()=>{d.fire({title:"Loading...",didOpen:()=>{d.showLoading()}})},onError:()=>{d.fire({title:"Gagal",text:"Terjadi kesalahan saat melakukan pembayaran.",icon:"error"})}})},P=Object.values(s).every(r=>r);return a(O,{children:[a("h1",{className:"text-xl text-primary font-bold",children:["Pembayaran untuk ",n.name]}),a("div",{className:"container mx-auto mt-10",children:[P?e("div",{className:"text-xl text-primary",children:"Pembayaran Sudah Lunas semua"}):a("div",{className:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark",children:[e("div",{className:"border-b border-stroke py-4 px-7 dark:border-strokedark",children:e("h3",{className:"font-medium text-black dark:text-white",children:"List Pembayaran"})}),e("div",{children:a("div",{className:"p-7",children:[a("div",{className:"mb-4",children:[e("div",{className:"flex gap-5 flex-wrap items-center",children:Object.entries(s).map(([r,t])=>t?null:e("div",{className:"w-[150px]",children:a("label",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",value:r,checked:i.bulan.includes(r),onChange:N,className:"p-4 rounded-lg border border-gray-300 focus:border-primary checked:bg-primary checked:hover:bg-primary/90 transition-all duration-300 focus:ring-2 focus:ring-blue-200"}),r]})},r))}),m.bulan&&e("p",{className:"text-red-500 text-xs italic",children:m.bulan})]}),e("div",{className:"flex mt-10 px-2",children:e("button",{onClick:()=>{i.bulan.length>0?c(!0):d.fire({icon:"error",title:"Oops...",text:"Tidak ada bulan yang dipilih!"})},type:"submit",className:"bg-primary hover:bg-primary/90 text-white  py-2 px-4 rounded focus:outline-none focus:shadow-outline",disabled:o,children:"Bayar"})})]})})]}),e(S,{open:g,onOpenChange:c,children:e(L,{children:a("form",{className:"space-y-4",onSubmit:v,children:[a(T,{children:[e(B,{children:"Konfirmasi Pembayaran"}),a(M,{children:[" ","Periksa data Pembayaran yang anda buat sudah benar, dan yakin ingin melakukan transaksi?"]})]}),a("div",{children:[a("h1",{children:[" ","Anda ingin membayar bulan"," ",a("span",{className:"text-primary font-semibold",children:[" ",i.bulan.join(", ")]})]}),a("p",{children:["Dengan Total Rp."," ",a("span",{className:"text-primary font-semibold underline underline-offset-4",children:[" ",h(w)]})]})]}),e(R,{children:e("button",{disabled:o,className:"inline-flex items-center justify-center rounded-md bg-primary py-2 px-4 text-center font-medium text-white hover:bg-opacity-90 lg:px-5 xl:px-6 disabled:opacity-75",type:"submit",children:o?"Membayar...":"Bayar"})})]})})}),a("div",{className:"rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark mt-10",children:[e("div",{className:"border-b border-stroke py-4 px-7 dark:border-strokedark",children:e("h3",{className:"font-medium text-black dark:text-white",children:"Detail Pembayaran"})}),e("div",{className:"max-w-full overflow-x-auto",children:a("table",{className:"w-full table-auto",children:[e("thead",{className:"table-header-group",children:a("tr",{className:"bg-gray-2 text-left dark:bg-meta-4",children:[e("th",{className:"min-w-[220px] py-4 px-4 font-medium text-black dark:text-white xl:pl-11",children:"No"}),e("th",{className:"min-w-[220px] py-4 px-4 font-medium text-black dark:text-white xl:pl-11",children:"Bulan"}),e("th",{className:"min-w-[220px] py-4 px-4 font-medium text-black dark:text-white xl:pl-11",children:"Status"}),e("th",{className:"min-w-[220px] py-4 px-4 font-medium text-black dark:text-white xl:pl-11",children:"Nominal"})]})}),e("tbody",{children:Object.entries(s).map(([r,t],l)=>a("tr",{className:"border-b border-stroke dark:border-strokedark",children:[e("td",{className:"border-b border-[#eee] py-5 px-4 dark:border-strokedark xl:pl-11",children:l+1}),e("td",{className:"border-b border-[#eee] py-5 px-4 dark:border-strokedark xl:pl-11",children:r}),e("td",{className:"border-b border-[#eee] py-5 px-4 dark:border-strokedark xl:pl-11",children:e("div",{className:` ${t?"bg-green-500":"bg-red-500"} w-[80px] px-2 py-1 text-center rounded-lg text-white`,children:t?"Paid":"Unpaid"})}),e("td",{className:"border-b border-[#eee] py-5 px-4 dark:border-strokedark xl:pl-11",children:h(b)})]},r))})]})})]})]})]})};export{Y as default};
