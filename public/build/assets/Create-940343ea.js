import{q as _,r as i,j as t,a as e,Y as U,F as C,y as D}from"./app-6d728cb8.js";import{D as q}from"./Dashboard-5e129d2a.js";import{w as H,S as Y}from"./sweetalert2-react-content.es-e19f9665.js";import{d as A,a as G}from"./dataAbsenTahfidz-04228a1d.js";import{D as Q}from"./DashboardLayoutAdmin-cc051e42.js";import{D as V,a as W,b as X,c as Z,d as ee,e as ae}from"./dialog-8c089a1b.js";import"./LoadingHeader-35e035e1.js";import"./createLucideIcon-5c8f2d95.js";import"./logotasnim-14338475.js";import"./Combination-9ddf78f3.js";import"./menu-552448b5.js";import"./user-round-cog-7b8ba954.js";import"./chevron-up-3c8e9cd7.js";import"./index-2cb27e81.js";import"./x-aafffee1.js";const fe=d=>{const{auth:z}=_().props,{bulan:b,santris:p,errors:h,tahun:k}=_().props,[L,f]=i.useState(!1),[x,y]=i.useState(!1),[g,I]=i.useState(""),[v,$]=i.useState(""),[l,N]=i.useState(p.map(r=>({santri_id:r.id,keterangan:"",from_surah:"",to_surah:"",from_ayat:"",to_ayat:"",juz:""}))),E=["hadir","izin","ghoib"],m=H(Y),[K,P]=i.useState(""),[T,F]=i.useState(""),[w,O]=i.useState(""),[S,R]=i.useState(""),J=r=>{r.preventDefault(),y(!0);const n={bulan:g,tahun:v,absensi:l};D.post(`/store-absen/${d.pelajaran.id}/${d.kelas.id}`,n,{onSuccess:()=>{y(!1),D.visit(`/absen-tasnim/${d.pelajaran.uuid}/${d.kelas.uuid}`),m.fire({title:"Absensi Berhasil!",icon:"success",confirmButtonColor:"#10B981",html:'<div id="customButtons"><button id="closeButton" class="swal2-cancel swal2-styled" style="background-color: #d33;">Close</button><button id="redirectButton" class="swal2-confirm swal2-styled" style="background-color: #10B981; margin-left: 10px;">Lihat Absensi</button></div>',showConfirmButton:!1,showCancelButton:!1,didRender:()=>{document.getElementById("closeButton").addEventListener("click",()=>{m.close()}),document.getElementById("redirectButton").addEventListener("click",()=>{window.location.href=`/detail-absensi/${d.pelajaran.uuid}/${d.kelas.uuid}/${K}/${T}`})}})}})},s=(r,n,o)=>{N(u=>u.map(c=>c.santri_id===r?{...c,[n]:o}:c))};i.useEffect(()=>{Object.keys(h).length>0&&(N(r=>r.map(n=>({...n,keterangan:n.keterangan||""}))),m.fire({title:"Tolong Lengkapi Data!",icon:"error",html:'<button id="closeButton" class="swal2-confirm swal2-styled" style="background-color: #d33;">Oke</button>',showConfirmButton:!1,didRender:()=>{document.getElementById("closeButton").addEventListener("click",()=>{m.close()})}}))},[h]);const M=z.user.type==="Admin"?Q:q;return t(M,{children:[e(U,{title:`Absensi - ${d.pelajaran.nama}`}),t("div",{className:"border-b border-stroke py-4 px-7 dark:border-strokedark rounded-lg",children:[t("h1",{className:"text-xl font-bold",children:["Absensi"," ",t("span",{className:"text-primary",children:[" ",": ",d.pelajaran.nama]})]}),t("p",{className:"text-lg font-semibold capitalize ",children:["Kelas"," ",t("span",{className:"text-primary pl-[32px]",children:[": ",d.kelas.nama]})]})]}),t("div",{className:"rounded-lg border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-background  p-5 space-y-5 mt-10",children:[t("div",{className:"gap-4 flex",children:[t("div",{className:"flex flex-col w-1/3",children:[e("label",{htmlFor:"bulan",className:"mb-3 block text-black dark:text-white",children:"Bulan"}),t("select",{name:"bulan",id:"bulan",className:"w-full appearance-none rounded border border-stroke bg-transparent py-2 outline-none transition focus:border-primary active:border-primary dark:border-form-strokedark dark:bg-form-input",value:g,onChange:r=>{const n=b.find(o=>o.id.toString()===r.target.value);I(r.target.value),O((n==null?void 0:n.nama)||""),P((n==null?void 0:n.uuid)||"")},children:[e("option",{value:"",disabled:!0,children:"Untuk Bulan"}),b.map(r=>e("option",{bulan:r.nama,value:r.id,children:r.nama},r.id))]})]}),t("div",{className:"flex flex-col w-1/3",children:[e("label",{htmlFor:"minggu",className:"mb-3 block text-black dark:text-white",children:"Tahun"}),t("select",{name:"tahun",id:"tahun",className:"w-full appearance-none rounded border border-stroke bg-transparent py-2 outline-none transition focus:border-primary active:border-primary dark:border-form-strokedark dark:bg-form-input",value:v,onChange:r=>{const n=k.find(o=>o.id.toString()===r.target.value);R((n==null?void 0:n.nama)||""),$(r.target.value),F((n==null?void 0:n.uuid)||"")},children:[e("option",{value:"",disabled:!0,children:"Pilih Tahun"}),k.map(r=>e("option",{value:r.id,children:r.nama},r.id))]})]})]}),e("div",{className:"mt-10 rounded-sm border border-stroke bg-white px-5 pt-6 pb-2.5 dark:border-strokedark dark:bg-background sm:px-7 xl:pb-1",children:e("div",{className:"max-w-full overflow-x-auto",children:t("table",{className:"w-full table-auto",children:[e("thead",{className:"table-header-group",children:t("tr",{className:"bg-gray-2 text-left dark:bg-meta-4",children:[e("th",{className:"min-w-[220px] py-4 px-4 font-medium text-black dark:text-white xl:pl-11",children:"Nama"}),e("th",{className:"min-w-[200px] py-4 px-4 font-medium text-black dark:text-white",children:"Status Keterangan"}),(d.pelajaran.nama==="Pelajaran 2"||d.pelajaran.nama==="Pelajaran 3")&&t(C,{children:[e("th",{className:"min-w-[180px] py-4 px-4 font-medium text-black dark:text-white",children:"Dari Surah"}),e("th",{className:"min-w-[180px] py-4 px-4 font-medium text-black dark:text-white",children:"Ke Surah"}),e("th",{className:"min-w-[150px] py-4 px-4 font-medium text-black dark:text-white",children:"Dari Ayat"}),e("th",{className:"min-w-[150px] py-4 px-4 font-medium text-black dark:text-white",children:"Ke Ayat"}),e("th",{className:"min-w-[150px] py-4 px-4 font-medium text-black dark:text-white",children:"Juz"})]})]})}),e("tbody",{className:"pt-10",children:p.map(r=>{var n,o,u,c,B,j;return t("tr",{children:[e("td",{className:"border-b border-[#eee] py-5 px-4 pl-9 dark:border-strokedark xl:pl-11",children:e("p",{className:"font-medium text-black dark:text-white",children:r.name})}),e("td",{className:"border-b border-[#eee] py-5 px-4 dark:border-strokedark",children:t("select",{className:"w-full appearance-none rounded border border-stroke bg-transparent py-2 outline-none transition focus:border-primary active:border-primary dark:border-form-strokedark dark:bg-form-input",value:((n=l.find(a=>a.santri_id===r.id))==null?void 0:n.keterangan)||"",onChange:a=>s(r.id,"keterangan",a.target.value),children:[e("option",{value:"",disabled:!0,children:"Status Keterangan"}),E.map(a=>e("option",{value:a,className:"text-body dark:text-bodydark",children:a},a))]})}),(d.pelajaran.nama==="Pelajaran 2"||d.pelajaran.nama==="Pelajaran 3")&&t(C,{children:[e("td",{className:"border-b border-[#eee] py-5 px-4 dark:border-strokedark",children:t("select",{className:"w-full appearance-none rounded border border-stroke bg-transparent py-2 outline-none transition focus:border-primary active:border-primary dark:border-form-strokedark dark:bg-form-input",value:((o=l.find(a=>a.santri_id===r.id))==null?void 0:o.from_surah)||"",onChange:a=>s(r.id,"from_surah",a.target.value),children:[e("option",{value:"",disabled:!0,children:"Dari Surah"}),A.map(a=>e("option",{value:a.surah,children:a.surah},a.id))]})}),e("td",{className:"border-b border-[#eee] py-5 px-4 dark:border-strokedark",children:t("select",{className:"w-full appearance-none rounded border border-stroke bg-transparent py-2 outline-none transition focus:border-primary active:border-primary dark:border-form-strokedark dark:bg-form-input",value:((u=l.find(a=>a.santri_id===r.id))==null?void 0:u.to_surah)||"",onChange:a=>s(r.id,"to_surah",a.target.value),children:[e("option",{value:"",disabled:!0,children:"Ke Surah"}),A.map(a=>e("option",{value:a.surah,children:a.surah},a.id))]})}),e("td",{className:"border-b border-[#eee] py-5 px-4 dark:border-strokedark",children:e("input",{type:"text",placeholder:"Dari Ayat",className:"w-full rounded border border-stroke bg-transparent py-2 px-3 font-medium outline-none transition focus:border-primary active:border-primary dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary",value:((c=l.find(a=>a.santri_id===r.id))==null?void 0:c.from_ayat)||"",onChange:a=>s(r.id,"from_ayat",a.target.value)})}),e("td",{className:"border-b border-[#eee] py-5 px-4 dark:border-strokedark",children:e("input",{type:"text",placeholder:"Ke Ayat",className:"w-full rounded border border-stroke bg-transparent py-2 px-3 font-medium outline-none transition focus:border-primary active:border-primary dark:border-form-strokedark dark:bg-form-input dark:focus:border-primary",value:((B=l.find(a=>a.santri_id===r.id))==null?void 0:B.to_ayat)||"",onChange:a=>s(r.id,"to_ayat",a.target.value)})}),e("td",{className:"border-b border-[#eee] py-5 px-4 dark:border-strokedark",children:t("select",{className:"w-full appearance-none rounded border border-stroke bg-transparent py-2 outline-none transition focus:border-primary active:border-primary dark:border-form-strokedark dark:bg-form-input",value:((j=l.find(a=>a.santri_id===r.id))==null?void 0:j.juz)||"",onChange:a=>s(r.id,"juz",a.target.value),children:[e("option",{value:"",disabled:!0,children:"Juz"}),G.map(a=>t("option",{value:a.id,children:["Juz ",a.juz]},a.id))]})})]})]},r.id)})})]})})}),e("div",{className:"mt-5",children:e("button",{onClick:()=>f(!0),className:"inline-flex items-center justify-center rounded-md bg-primary py-2 px-4 text-center font-medium text-white hover:bg-opacity-90 lg:px-5 xl:px-6",children:"Buat Absensi"})})]}),e(V,{open:L,onOpenChange:f,children:e(W,{children:t("form",{className:"space-y-4",onSubmit:J,children:[t(X,{children:[e(Z,{children:"Buat Absensi"}),t(ee,{children:[" ","Periksa data absen yang anda buat, dan simpan jika data sudah benar"," "]})]}),t("div",{className:"text-center",children:[t("h1",{children:["Buat absensi"," ",e("span",{className:"text-primary capitalize",children:d.pelajaran.nama})," ","Untuk kelas"," ",e("span",{className:"text-primary capitalize",children:d.kelas.nama})]}),w&&S!==""?t("h2",{children:["Pada ",w," - ",S]}):e("p",{className:"text-red-500",children:"Anda belum memilih bulan dan tahun"})]}),e(ae,{children:e("button",{disabled:x,className:"inline-flex items-center justify-center rounded-md bg-primary py-2 px-4 text-center font-medium text-white hover:bg-opacity-90 lg:px-5 xl:px-6 disabled:opacity-75",type:"submit",children:x?"Menyimpan...":"Simpan"})})]})})})]})};export{fe as default};
